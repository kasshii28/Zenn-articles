---
title: "ã€Typescriptã€‘Utility Typesã®ä½¿ã„ã‹ãŸã‚’ã¾ã¨ã‚ã¦ã¿ãŸ"
emoji: "âœï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "tech"]
published: true
---
# Utility Typesã¨ã¯?
`Utility Types`ã¯Typescriptã®æ—¢å­˜ã®å‹ã‚’å†åˆ©ç”¨ãƒ»åŠ å·¥ãªã©ãŒå‡ºæ¥ã‚‹ä¾¿åˆ©ãªå‹ã§ã™ã€‚
æ—¢ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹å‹ã¨ä¼¼ãŸã‚ˆã†ãªå‹ãŒæ¬²ã—ã„æ™‚ãªã©ã«`Utility Types`ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒå‡ºæ¥ãŸã‚Šã—åŠ¹ç‡çš„ã«å‹ã‚’æ‰±ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

# `Awaited<T>`
`Awaited<T>`ã¯`await`ã‚„`.then()`ã‚’ä½¿ã£ãŸæ™‚ã«å¾—ã‚‰ã‚Œã‚‹å€¤ã®å‹ã‚’æ‰±ã†æ™‚ã«ä½¿ãˆã¾ã™ã€‚
ä¾‹ãˆã°éåŒæœŸé–¢æ•°ã®æˆ»ã‚Šå€¤ã®å‹ãŒæ¬²ã—ã„æ™‚ãªã©ã§ã™ã€‚
```ts
// åŸºæœ¬çš„ãªæ§‹æ–‡
type Sample = Awaited<Promise<string>>

// éåŒæœŸé–¢æ•°ã®æˆ»ã‚Šå€¤ã‹ã‚‰å‹ãŒæ¬²ã—ã„æ™‚
async function fetchData(): Promise<{ name: string }>{
    return { name: "sampleName" }
}

// éåŒæœŸé–¢æ•°ã®æˆ»ã‚Šå€¤ã®å‹
type ResultFetchData = Awaited<ReturnType<typeof fetchData>>

```
# `Partial<T>`
`Partial<T>`ã¯`<T>`ã®å…¨ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’Optional(ä»»æ„)ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä¸»ã«ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã‚’ã™ã‚‹éš›ãªã©ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```ts
interface Person {
    name: string;
    age: number;
}

// Personã®æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
function updatePerson(person: Person, updates: Partial<Person>){
    return { ...person, ...updates };
}

// 1å›ç›®: ç™»éŒ²
const firstPerson = {
    name: "first",
    age: 1
}

// 2å›ç›®: æ›´æ–°
const secondPerson = updatePerson(firstPerson, {
    name: "second",
    age: 2
})
```

# `Required<T>`
`Required<T>`ã¯`<T>`ã®å…¨ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’Required(å¿…é ˆ)ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã‚Œã¯`Partial<T>`ã¨ã¯åå¯¾ã®å‹•ãã«ãªã‚Šã¾ã™ã€‚
```ts
interface Person {
    name?: string;
    age?: number;
}

// Optionalã®å ´åˆ
const person: Person = {
    name: "only name"
}
// â˜‘ nameã ã‘ã§ã‚‚OK

// Reuquiredã®å ´åˆ 
const person: Required<Person> = {
    name: "only name"
}
// âŒï¸ nameã ã‘ã ã¨Error

const person: Required<Person> = {
    name: "name and age",
    age: 1
}
// â˜‘ å…¨ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä»£å…¥ã•ã‚Œã¦ã„ã‚‹ã®ã§OK
```

# `Readonly<T>`
`Readonly<T>`ã¯`<T>`ã®å…¨ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’`readonly`(èª­ã¿å–ã‚Šå°‚ç”¨)ã«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ã“ã‚Œã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä»£å…¥ãŒç¦æ­¢ã•ã‚Œã‚‹ãŸã‚ã€ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æ‰±ãˆã¾ã™ã€‚

```ts
interface Person {
    name: string;
    age: number
}

const person: Readonly<Person> = {
    name: "first",
    age: 1
}

person.name = "second"
// âŒï¸ å†ä»£å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨Error

```
# `Record<K,T>`
`Record<K,T>`ã¯ã‚­ãƒ¼ã®å‹ãŒ`<K>`ã§ã€ãã®å€¤ã®å‹ãŒ`<T>`ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
å‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ¥ã®å‹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹æ™‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```ts
type PersonName = "first" | "second"

interface PersonInfo {
    age: number;
    from: string
}

// personã”ã¨ã®æƒ…å ±ãŒã‚ã‚‹å‹ãŒä½œã‚Œã‚‹
const people: Record<PersonName, PersonInfo> = {
    first: { age: 1, from : "JP" },
    second: { age: 2, from : "US" }
}

people.first // { age: 1, from: "JP" }
people.second.age // 2
```

# `Pick<T,K>`
`Pick<T,K>`ã¯å‹`<T>`ã‹ã‚‰ã€å‹ã«å«ã¾ã‚Œã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£`<K>`ã‚’æŠ½å‡ºã—ã¦å‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
æ—¢å­˜ã®å‹ã‹ã‚‰ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’æŠ½å‡ºã—ã¦å‹ã‚’ä½œã‚ŠãŸã„å ´åˆã«ä½¿ã‚ã‚Œã¾ã™ã€‚

```ts
interface Person {
    id: number
    name: string;
    age: number;
    from: string;
    email: string;
}

// å…¬é–‹æƒ…å ±ã ã‘ã‚’æŠ½å‡º
type PublicPerson = Pick<Person, "name" | "from">

// éå…¬é–‹æƒ…å ±ã‚’æŒãŸãªã„ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’ä½œã‚Œã‚‹
const person: PublicPerson = {
    name: "public",
    from: "JP"
}
```

# `Omit<T,K>`
`Omit<T,K>`ã¯å‹`<T>`ã‹ã‚‰å‹ã«å«ã¾ã‚Œã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£`<K>`ã‚’é™¤å¤–ã—ã¦å‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
æ—¢å­˜ã®å‹ã‹ã‚‰ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’é™¤å¤–ã—ã¦å‹ã‚’ä½œã‚ŠãŸã„æ™‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
`Pick<T,K>`ã¨åå¯¾ã®å‹•ãã«ãªã‚Šã¾ã™ã€‚

```ts
interface Person {
    id: number
    name: string;
    age: number;
    from: string;
    email: string;
}

// éå…¬é–‹æƒ…å ±ã ã‘ã‚’é™¤å¤–
type PublicPerson = Omit<Person, "id" | "age" | "email">

// éå…¬é–‹æƒ…å ±ã‚’æŒãŸãªã„ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’ä½œã‚Œã‚‹
const person: PublicPerson = {
    name: "public",
    from: "JP"
}
```

# `Exclude<T,U>`
`Exclude<T,U>`ã¯å…ƒã®Unionå‹`<T>`ã‹ã‚‰å‹`<U>`ã‚’é™¤å¤–ã—ã¦å‹ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```ts
type Color = "red" | "blue" | "green"

type Color1 = Exclude<Color, "green"> 
// red | blue

type Color2 = Exclude<Color, "red" | "blue">
// green

type PersonInfo = 
    | { age: 1, from : "JP" }
    | { age: 2, from : "US" }

type PersonInfo1 = Exclude<PersonInfo, { age: 1 }>
// { age: 2, from "US" }
// age:1ã‚’å«ã‚“ã§ã„ã‚‹ã‚‚ã®ã‚’é™¤å¤–

type ResultNever = Exclude<PersonInfo, { age: 1 } | { age: 2 }>
// å…¨ã¦é™¤å¤–ã•ã‚ŒãŸå ´åˆã¯neverã«ãªã‚‹
```

# `Extract<T,U>`
`Extract<T,U>`ã¯å…ƒã®Unionå‹`<T>`ã‹ã‚‰å‹`<U>`ã‚’æŠ½å‡ºã—ã¦å‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
`Exclude<T,U>`ã¨åå¯¾ã®å‹•ãã«ãªã‚Šã¾ã™ã€‚

```ts
type Color = "red" | "blue" | "green"

type Color1 = Extract<Color, "green"> 
// green

type Color2 = Extract<Color, "red" | "yellow">
// red

type PersonInfo = 
    | { age: 1, from : "JP" }
    | { age: 2, from : "US" }

type PersonInfo1 = Extract<PersonInfo, { age: 1 }>
// { age: 1, from "JP" }
// age:1ã‚’å«ã‚“ã§ã„ã‚‹ã‚‚ã®ã‚’æŠ½å‡º
```

# `NonNullable<T>`
`NonNullable<T>`ã¯`<T>`ã‹ã‚‰`null`ã¨`undefined`ã‚’é™¤å¤–ã—ãŸå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
type Color0 = "red" | "blue" | "green" | null
type Color1 = "red" | "blue" | "green" | null | undefined

type Color0 = NonNullable<Color0>
// red | blue | green

type Color1 = NonNullable<Color1>
// red | blue | green
```

# `Parameters<T>`
`Paramters<T>`ã¯é–¢æ•°å‹`<T>`ã®å¼•æ•°ã®å‹ã‚’ã‚¿ãƒ—ãƒ«å‹ã¨ã—ã¦æŠ½å‡ºã—ãŸå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
function func(a: number, b:number): number {
    return a+b
}

type F0 = Parameters<() => number>
// []

type F1 = Parameters<(num: number) => number>
// [num: number]

type F2 = Parameters<<T>(arg: T) => T>
// [arg: unknown]

type F3 = Parameters<typeof func>
// [a: number, b:number]

type F4 = Parameters<any>
// unknown[]

type F5 = Parameters<never>
// never

type F6 = Parameters<string>
// never ErrorãŒå‡ºã‚‹
// é–¢æ•°ã§ã¯ãªãç›´æ¥å‹ã‚’æ¸¡ã—ã¦ã„ã‚‹ãŸã‚

type F7 = Parameters<Function>
// never ErrorãŒå‡ºã‚‹
// Functionã¯æŠ½è±¡çš„ãªå‹ã§å…·ä½“çš„ãªå¼•æ•°ã®æƒ…å ±ã‚’æŒã£ã¦ã„ãªã„
// ãã®ãŸã‚é–¢æ•°ã®ã‚·ã‚°ãƒãƒãƒ£ã«ä¸€è‡´ã—ãªã„
```

# `ConstructorParameters<T>`
`ConstuctorParameters<T>`ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°å‹`<T>`ã®å¼•æ•°ã®å‹ã‚’ã‚¿ãƒ—ãƒ«å‹ã¨ã—ã¦æŠ½å‡ºã—ãŸå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
type A = new (a: number, b: string) => object;

type A0 = ConstructorParameters<A>
// [a:number, b:string]

class B {
    constructor(a: number, b: string) {}
}

type B0 = ConstructorParameters<typeof B>
// [a: number, b:string]

type T0 = Constructor<Function>
// never ErrorãŒå‡ºã‚‹
// é–¢æ•°ã‚’æ¸¡ã™ã¨ErrorãŒã§ã‚‹
```

# `ReturnType<T>`
`ReturnType<T>`ã¯é–¢æ•°å‹`<T>`ã®æˆ»ã‚Šå€¤ã®å‹ã‚’æŠ½å‡ºã—ãŸå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
function func(): string {
    return "hello"
}

type T0 = ReturnType<() => string>
// string

type T1 = ReturnType<<T>() => T>
// unknown

type T2 = ReturnType<typeof func>
// string

type T3 = ReturnType<string>
// any ErrorãŒå‡ºã‚‹
// é–¢æ•°ã§ã¯ãªãç›´æ¥å‹ã‚’æ¸¡ã—ã¦ã„ã‚‹ãŸã‚

type T4 = ReturnType<Function>
// any ErrorãŒå‡ºã‚‹
// Functionã¯æŠ½è±¡çš„ãªå‹ã§å…·ä½“çš„ãªæˆ»ã‚Šå€¤ã®æƒ…å ±ã‚’æŒã£ã¦ã„ãªã„
// ãã®ãŸã‚é–¢æ•°ã®ã‚·ã‚°ãƒãƒãƒ£ã«ä¸€è‡´ã—ãªã„
```

# `InstanceType<T>`
`InstanceType<T>`ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å‹`<T>`ãŒç”Ÿæˆã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å‹ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
class A {
    constructor(a: number, b:string) {}
}

type A0 = InstanceType<typeof A>
// A

class B {
    a = 0;
    b = "hello";
}

type B0 = InstanceType<typeof B>
// B

type T0 = InstanceType<string>
// any ErrorãŒå‡ºã‚‹

type T1 = InstanceType<Function>
//any ErrorãŒå‡ºã‚‹
```

# `NoInfer<T>`
`NoInfer<T>`ã¯`<T>`ã®å‹æ¨è«–ã‚’é˜²ãã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts

function createStreetLight<T extends string>(
    colors: T[],
    defaultColor?: T
) {
    return {
        colors,
        defaultColor
    }
}

type colors = "red" | "green" | "blue"
const colors: colors[] = ["red", "green", "blue"]

createStreetLight(colors, "red")
// redã¯å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§OK

createStreetLight(colors, "yellow")
// yellowã¯å«ã¾ã‚Œã¦ã„ãªã„ãŒErrorãŒå‡ºãªã„
// "red" | "green" | "blue" | "yellow"ã¨æ¨è«–ã•ã‚Œã¦ã—ã¾ã†
```

ç¬¬äºŒå¼•æ•°ã®å‹ã¯é…åˆ—ã®å€¤ã ã‘ã‚’è¨±å®¹ã—ãŸã„ã®ã§`defaultColor?: NoInfer<T>`ã¨ã™ã‚‹ã“ã¨ã§ä¸è¦ãªå‹æ¨è«–ãŒã•ã‚Œãªããªã‚‹ã€‚

```ts
function createStreetLight<T extends string>(
    colors: T[],
    defaultColor?: NoInfer<T>
) {
    ...
}

createStreetLight(colors, "red")
// redã¯å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§OK

createStreetLight(colors, "yellow")
// yellowã¯å«ã¾ã‚Œã¦ã„ãªã„ã®ã§ErrorãŒå‡ºã‚‹
```

# `ThisParameterType<T>`
`ThisParameterType<T>`ã¯`this`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿`<T>`ã®å‹ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
function func(this: { a: number }, b: string){}

type T0 = ThisParameterType<typeof func>
// { a: number }

function func1(a: number, b: string){}

type T1 = ThisParameterType<typeof func1>
// unknown
```

# `OmitThisParameter<T>`
`OmitThisParameter<T>`ã¯é–¢æ•°å‹`<T>`ã‹ã‚‰`this`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¨ã¦é™¤å¤–ã—ãŸå‹ã‚’ä½œã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
function func1(this: { a: number }): string{
    return `${this.a}year`
}

type T0 = OmitThisParameter<typeof func1>
// () => string
```

# `ThisType<T>`
`ThisType<T>`ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«å†…ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ãŠã‘ã‚‹`this`ã®å‹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
// é€šå¸¸ã®ä¾‹
const obj = {
    name: "test",
    hello() {
        // thisã¯æš—é»™çš„ã«objå‹ã«ãªã‚Šã¾ã™
        console.log(`Hello ${this.name}`)
    }
}

interface Person {
    name: string;
    age: number;
}

// ThisTypeã‚’ä½¿ç”¨ã—ãŸä¾‹
type ObjMethod = {
    name: string;
    hello(): void;
} & ThisType<Person>

const obj2: ObjMethod = {
    name: "test",
    hello() {
        // thisã¯{ name: string; age: number }å‹ã«ãªã‚Šã¾ã™
        console.log(`Hello ${this.name}`)
        console.log(`I'm ${this.age}`)
    }
}
```
# Intrinsic String Manipulation Types
ã“ã‚Œã¯æ–‡å­—åˆ—å‹ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®å‹ã§è¨ˆ4ç¨®é¡ã®å‹ãŒã‚ã‚Šã¾ã™ã€‚
## `Uppercase<T>`, `Lowercase<T>`, `Capitalize<T>`, `Uncapitalize<T>`
```ts
type T0 = "Hello, world"

type UpperT = Uppercase<T0>
// HELLO, WORLD

type LowerT = Lowercase<T0>
// hello, world

type CapT = Capitalize<LowerT>
// Hello, world

type UnCapT = Uncapitalize<UpperT>
// hELLO, WORLD
```
# ã¾ã¨ã‚
é–‹ç™ºä¸­ã«è‰¯ãåˆ†ã‹ã‚‰ãªã„å‹ãŒã„ãã¤ã‹å‡ºã¦ãã¦ã„ãŸã®ã§ã€ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚é–“é•ã£ã¦ã„ãŸã‚‰ã”æŒ‡æ‘˜ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚ğŸ™‡â€â™€ï¸
# å‚ç…§
https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkeys-type
https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html#uppercasestringtype